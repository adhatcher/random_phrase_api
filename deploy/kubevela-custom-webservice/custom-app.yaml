apiVersion: core.oam.dev/v1beta1
kind: Application
metadata:
  name: backend
  namespace: phrases
  annotations:
    argocd.argoproj.io/sync-wave: "1"
spec:
  components:
    - name: backend
      type: custom-webservice
      properties:
        labels:
          app: backend
          project: phrases
        image: ghcr.io/adhatcher/random_phrase_api:e56c6ca7a716595514c8dc506b186271a33a5118
        port: 7070
        probePath: /healthz
      traits:
        - type: httproute
          properties:
            routeName: backend
            hostname: backend.zeus
            path: /backend
            gateway:
              name: zeus-gw
              namespace: envoy-gateway-system
              sectionName: https
            service:
              name: backend
              port: 7070
